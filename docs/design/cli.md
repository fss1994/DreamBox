## 编译设计

### 背景

DB的DSL采用XML进行编写。而RUNTIME的诉求有：
1. 性能。XML在手机终端的性能是远不如JSON，希望能够在运行时得到更加的性能
2. 规范。DSL文档与自动补全等起到的是辅助作用，需要强保障一些基础规则在开发调试阶段能被及时修正
3. 极致优化，如压缩、混淆等不需要接入方开发者关心的技术细节，需要通过编译器进行抹平

### 编译器设计

编译器的输入输出分别为：
- DreamBox DSL（XML）
- DreamBox 渲染模板数据

编译器的主体工作流程：
- 解析XML
- 规则检查
- 优化处理
- 转化为JSON
- 对JSON做MD5
- 对JSON做Base64
- 拼接MD5、版本号、Base64等数据作为编译产出的渲染模板数据

### 编译格式

|位置|内容|
|-|-|
|0-31|MD5|
|32-35|版本号，四位。表示此渲染模板数据所能支持的最低SDK版本。如v0.1版本，则为0001，每个版本号占用两位|
|36-55|20位保留位|
|55+|Base64数据|

